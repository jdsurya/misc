
<!DOCTYPE html>
<html lang="nl">
<head>
    <meta charset="UTF-8">
    <title>Dutch B1 Vocabulary Trainer</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <style>
        :root {
            --bg: #fafafa;
            --card-bg: #ffffff;
            --accent: #0077b6;
            --accent-soft: #e3f2fd;
            --text-main: #222222;
            --text-muted: #666666;
            --border-soft: #dddddd;
            --danger: #c62828;
        }

        * {
            box-sizing: border-box;
        }

        body {
            margin: 0;
            font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
            background: var(--bg);
            color: var(--text-main);
            padding: 1.5rem;
        }

        .app {
            max-width: 900px;
            margin: 0 auto;
        }

        h1 {
            margin-top: 0;
            font-size: 1.8rem;
        }

        .subtitle {
            color: var(--text-muted);
            margin-bottom: 1.5rem;
        }

        .card {
            background: var(--card-bg);
            border-radius: 12px;
            padding: 1.5rem;
            box-shadow: 0 6px 18px rgba(0,0,0,0.04);
            margin-bottom: 1.5rem;
            border: 1px solid var(--border-soft);
        }

        .top-bar {
            display: flex;
            justify-content: space-between;
            align-items: center;
            gap: 1rem;
            margin-bottom: 1rem;
            flex-wrap: wrap;
        }

        .progress {
            font-size: 0.95rem;
            color: var(--text-muted);
        }

        .badge {
            display: inline-flex;
            align-items: center;
            padding: 0.15rem 0.6rem;
            border-radius: 999px;
            font-size: 0.75rem;
            background: var(--accent-soft);
            color: var(--accent);
            margin-left: 0.3rem;
        }

        .difficulty {
            font-family: "SF Mono", Menlo, Consolas, monospace;
        }

        .main-word {
            font-size: 2rem;
            font-weight: 650;
            margin-bottom: 0.5rem;
        }

        .pos {
            font-size: 0.9rem;
            color: var(--text-muted);
            margin-bottom: 0.3rem;
        }

        .phase-label {
            font-size: 0.85rem;
            text-transform: uppercase;
            letter-spacing: 0.08em;
            color: var(--accent);
            margin-bottom: 0.75rem;
        }

        .sentence {
            font-size: 1.1rem;
            margin-bottom: 0.8rem;
        }

        .sentence .target-word {
            font-weight: 700;
            text-decoration: underline;
        }

        .sentence .extra-b1 {
            border-bottom: 2px dotted rgba(0, 119, 182, 0.5);
        }

        .translation {
            margin-top: 0.25rem;
            font-size: 1rem;
            color: var(--text-muted);
        }

        .extra-info {
            margin-top: 1rem;
            font-size: 0.95rem;
        }

        .extra-info dt {
            font-weight: 600;
        }

        .extra-info dd {
            margin: 0 0 0.4rem 0;
        }

        .controls {
            display: flex;
            flex-wrap: wrap;
            gap: 0.5rem;
            margin-top: 1.25rem;
        }

        button {
            border-radius: 999px;
            padding: 0.55rem 1.1rem;
            border: none;
            cursor: pointer;
            font-size: 0.95rem;
            display: inline-flex;
            align-items: center;
            gap: 0.35rem;
        }

        button.main {
            background: var(--accent);
            color: white;
            font-weight: 600;
        }

        button.secondary {
            background: var(--accent-soft);
            color: var(--accent);
        }

        button.ghost {
            background: transparent;
            border: 1px solid var(--border-soft);
            color: var(--text-muted);
        }

        button.danger {
            background: var(--danger);
            color: white;
        }

        button:disabled {
            opacity: 0.5;
            cursor: default;
        }

        .hint {
            font-size: 0.8rem;
            color: var(--text-muted);
            margin-top: 0.4rem;
        }

        .overview-card {
            max-height: 320px;
            overflow: auto;
        }

        table {
            width: 100%;
            border-collapse: collapse;
            font-size: 0.9rem;
        }

        th, td {
            padding: 0.35rem 0.4rem;
            border-bottom: 1px solid #f0f0f0;
            text-align: left;
        }

        th {
            position: sticky;
            top: 0;
            background: #f9fafb;
            z-index: 1;
            font-size: 0.8rem;
            text-transform: uppercase;
            letter-spacing: 0.06em;
            color: var(--text-muted);
        }

        tr.clickable-row {
            cursor: pointer;
        }

        tr.clickable-row:hover {
            background: #f5f9ff;
        }

        .current-row {
            background: #e3f2fd;
        }

        .footer-note {
            font-size: 0.8rem;
            color: var(--text-muted);
            margin-top: 0.75rem;
        }

        @media (max-width: 600px) {
            body {
                padding: 1rem;
            }

            .main-word {
                font-size: 1.6rem;
            }

            .controls {
                flex-direction: column;
                align-items: stretch;
            }

            button {
                width: 100%;
                justify-content: center;
            }

            .overview-card {
                max-height: 260px;
            }
        }
    </style>
</head>
<body>
<div class="app">
    <h1>Dutch B1 Vocabulary Trainer</h1>
    <p class="subtitle">
        Klik op <strong>Volgende stap / woord</strong> om door de fasen te gaan: woord ‚Üí Nederlandse zin ‚Üí Engelse vertaling ‚Üí extra info.
        Gebruik je toetsenbord: <strong>Spatie/Enter</strong> = volgende stap, <strong>‚Üê</strong> = vorige woord.
    </p>

    <div class="card" id="trainer-card">
        <div class="top-bar">
            <div class="progress" id="progress-text">Woord 1 / 1</div>
            <div class="progress">
                Moeilijkheid: <span class="difficulty" id="difficulty-text"></span>
                <span class="badge" id="phase-badge">Woord</span>
            </div>
        </div>

        <div class="main-word" id="word-display">Laden...</div>
        <div class="pos" id="pos-display"></div>

        <div class="phase-label" id="phase-label"></div>

        <div class="sentence" id="sentence-display"></div>
        <div class="translation" id="translation-display"></div>

        <dl class="extra-info" id="extra-info"></dl>

        <div class="controls">
            <button class="main" id="next-button">Volgende stap / woord ‚è≠</button>
            <button class="secondary" id="replay-button">Opnieuw dit woord üîÅ</button>
            <button class="ghost" id="previous-button">Vorige woord ‚èÆ</button>
            <button class="ghost" id="shuffle-button">Woorden schudden üîÄ</button>
            <button class="ghost" id="reset-button">Herbegin (vergeet voortgang)</button>
        </div>
        <div class="hint">
            Hints: Spatie/Enter = volgende stap ‚Ä¢ Pijltje links = vorig woord ‚Ä¢
            Deze pagina bewaart automatisch je voortgang op dit apparaat (via localStorage).
        </div>
    </div>

    <div class="card overview-card">
        <h2>Overzicht van woorden</h2>
        <p class="subtitle">Klik op een woord om er meteen naartoe te springen.</p>
        <table>
            <thead>
            <tr>
                <th>#</th>
                <th>Woord</th>
                <th>Soort woord</th>
                <th>Betekenis (EN)</th>
                <th>‚òÖ</th>
            </tr>
            </thead>
            <tbody id="overview-body">
            <!-- dynamically filled -->
            </tbody>
        </table>
        <p class="footer-note">
            Dit bestand bevat een set woorden. Je kunt zelf meer woorden toevoegen in de JavaScript-sectie
            (<code>vocabData</code>) in deze HTML.
        </p>
    </div>
</div>

<script>
    const vocabData = [
    {
        "word": "geluidsoverlast",
        "pos": "zelfstandig naamwoord",
        "difficulty": 3,
        "formation": "geluid + overlast",
        "meaning_en": "noise nuisance, noise pollution",
        "example_nl": "Bewoners klagen over de geluidsoverlast van vliegtuigen in de nacht.",
        "example_en": "Residents complain about the noise nuisance from airplanes at night.",
        "other_b1_words": [
            "bewoners",
            "klagen",
            "vliegtuigen",
            "nacht"
        ]
    },
    {
        "word": "gemeenschap",
        "pos": "zelfstandig naamwoord",
        "difficulty": 2,
        "formation": "gemeen + schap",
        "meaning_en": "community",
        "example_nl": "In deze kleine gemeenschap kent bijna iedereen elkaar.",
        "example_en": "In this small community almost everyone knows each other.",
        "other_b1_words": [
            "kleine",
            "iedereen"
        ]
    },
    {
        "word": "geneigd",
        "pos": "bijvoeglijk naamwoord",
        "difficulty": 3,
        "formation": "neigen ‚Üí geneigd",
        "meaning_en": "inclined, tending",
        "example_nl": "Hij is geneigd om te lang door te werken en vergeet pauze te nemen.",
        "example_en": "He is inclined to keep working too long and forgets to take a break.",
        "other_b1_words": [
            "te lang",
            "werken",
            "vergeet",
            "pauze"
        ]
    },
    {
        "word": "geschiedenis",
        "pos": "zelfstandig naamwoord",
        "difficulty": 1,
        "formation": "geschied + enis",
        "meaning_en": "history",
        "example_nl": "Ze vindt de Nederlandse geschiedenis interessant, vooral de Gouden Eeuw.",
        "example_en": "She finds Dutch history interesting, especially the Golden Age.",
        "other_b1_words": [
            "Nederlandse",
            "interessant",
            "vooral"
        ]
    },
    {
        "word": "herkennen",
        "pos": "werkwoord",
        "difficulty": 1,
        "formation": "her + kennen",
        "meaning_en": "to recognise",
        "example_nl": "Ik herkende hem bijna niet zonder zijn baard.",
        "example_en": "I hardly recognised him without his beard.",
        "other_b1_words": [
            "bijna",
            "zonder",
            "baard"
        ]
    },
    {
        "word": "hopeloos",
        "pos": "bijvoeglijk naamwoord",
        "difficulty": 2,
        "formation": "hoop + -eloos",
        "meaning_en": "hopeless",
        "example_nl": "Na drie mislukte examens voelde hij zich hopeloos.",
        "example_en": "After three failed exams he felt hopeless.",
        "other_b1_words": [
            "drie",
            "mislukte",
            "examens",
            "voelde"
        ]
    },
    {
        "word": "indrukwekkend",
        "pos": "bijvoeglijk naamwoord",
        "difficulty": 2,
        "formation": "indruk + wekkend",
        "meaning_en": "impressive",
        "example_nl": "Het uitzicht vanaf de top van de berg was echt indrukwekkend.",
        "example_en": "The view from the top of the mountain was really impressive.",
        "other_b1_words": [
            "uitzicht",
            "top",
            "berg",
            "echt"
        ]
    },
    {
        "word": "instelling",
        "pos": "zelfstandig naamwoord",
        "difficulty": 2,
        "formation": "in + stelling",
        "meaning_en": "institution; setting; attitude",
        "example_nl": "De onderwijsinstelling biedt ook cursussen in de avond aan.",
        "example_en": "The educational institution also offers courses in the evening.",
        "other_b1_words": [
            "onderwijsinstelling",
            "bieden",
            "cursussen",
            "avond"
        ]
    },
    {
        "word": "invoering",
        "pos": "zelfstandig naamwoord",
        "difficulty": 3,
        "formation": "invoeren ‚Üí invoering",
        "meaning_en": "introduction (of a law, system)",
        "example_nl": "De invoering van het nieuwe systeem zorgde eerst voor veel verwarring.",
        "example_en": "The introduction of the new system initially caused a lot of confusion.",
        "other_b1_words": [
            "nieuw",
            "systeem",
            "zorgde",
            "verwarring"
        ]
    },
    {
        "word": "keuzevrijheid",
        "pos": "zelfstandig naamwoord",
        "difficulty": 3,
        "formation": "keuze + vrijheid",
        "meaning_en": "freedom of choice",
        "example_nl": "In dit zorgstelsel hebben pati√´nten veel keuzevrijheid.",
        "example_en": "In this healthcare system patients have a lot of freedom of choice.",
        "other_b1_words": [
            "zorgstelsel",
            "pati√´nten",
            "veel"
        ]
    },
    {
        "word": "klimaatverandering",
        "pos": "zelfstandig naamwoord",
        "difficulty": 3,
        "formation": "klimaat + verandering",
        "meaning_en": "climate change",
        "example_nl": "Steeds meer jongeren maken zich zorgen over klimaatverandering.",
        "example_en": "More and more young people worry about climate change.",
        "other_b1_words": [
            "steeds meer",
            "jongeren",
            "zorgen"
        ]
    },
    {
        "word": "maatschappij",
        "pos": "zelfstandig naamwoord",
        "difficulty": 2,
        "formation": "maat + schap + -ij",
        "meaning_en": "society",
        "example_nl": "In een moderne maatschappij spelen sociale media een grote rol.",
        "example_en": "In a modern society social media play a big role.",
        "other_b1_words": [
            "moderne",
            "sociale media",
            "grote",
            "rol"
        ]
    },
    {
        "word": "omgeving",
        "pos": "zelfstandig naamwoord",
        "difficulty": 1,
        "formation": "om + geving",
        "meaning_en": "environment, surroundings",
        "example_nl": "Hij zoekt een baan in de omgeving van Amsterdam.",
        "example_en": "He is looking for a job in the area around Amsterdam.",
        "other_b1_words": [
            "baan",
            "zoeken"
        ]
    },
    {
        "word": "onderdrukken",
        "pos": "werkwoord",
        "difficulty": 3,
        "formation": "onder + drukken",
        "meaning_en": "to suppress, to oppress",
        "example_nl": "In sommige landen wordt de pers nog steeds zwaar onderdrukt.",
        "example_en": "In some countries the press is still heavily suppressed.",
        "other_b1_words": [
            "sommige",
            "landen",
            "pers",
            "nog steeds"
        ]
    },
    {
        "word": "onzekerheid",
        "pos": "zelfstandig naamwoord",
        "difficulty": 2,
        "formation": "onzeker + -heid",
        "meaning_en": "uncertainty, insecurity",
        "example_nl": "De economische onzekerheid maakt het moeilijk om plannen te maken.",
        "example_en": "The economic uncertainty makes it difficult to make plans.",
        "other_b1_words": [
            "economische",
            "moeilijk",
            "plannen"
        ]
    },
    {
        "word": "oplossing",
        "pos": "zelfstandig naamwoord",
        "difficulty": 1,
        "formation": "op + lossing",
        "meaning_en": "solution",
        "example_nl": "Na lang overleg vonden ze eindelijk een goede oplossing voor het probleem.",
        "example_en": "After a long discussion they finally found a good solution to the problem.",
        "other_b1_words": [
            "lang",
            "overleg",
            "eindelijk",
            "probleem"
        ]
    },
    {
        "word": "opschuiven",
        "pos": "werkwoord",
        "difficulty": 3,
        "formation": "op + schuiven",
        "meaning_en": "to move up, to shift",
        "example_nl": "Kun je iets opschuiven, zodat er nog iemand aan tafel kan zitten?",
        "example_en": "Could you move up a bit so that one more person can sit at the table?",
        "other_b1_words": [
            "iemand",
            "tafel",
            "zitten"
        ]
    },
    {
        "word": "overbodig",
        "pos": "bijvoeglijk naamwoord",
        "difficulty": 3,
        "formation": "over + bodig (oud)",
        "meaning_en": "unnecessary, superfluous",
        "example_nl": "Veel bijlagen in de e-mail waren eigenlijk overbodig.",
        "example_en": "Many attachments in the e‚Äëmail were actually unnecessary.",
        "other_b1_words": [
            "bijlagen",
            "e-mail",
            "eigenlijk"
        ]
    },
    {
        "word": "toegenomen",
        "pos": "bijvoeglijk naamwoord / voltooid deelwoord",
        "difficulty": 2,
        "formation": "toe + nemen ‚Üí toegenomen",
        "meaning_en": "increased",
        "example_nl": "Het aantal internationale studenten is de laatste jaren sterk toegenomen.",
        "example_en": "The number of international students has strongly increased in recent years.",
        "other_b1_words": [
            "aantal",
            "internationale",
            "studenten",
            "laatste jaren"
        ]
    },
    {
        "word": "voortdurend",
        "pos": "bijwoord / bijvoeglijk naamwoord",
        "difficulty": 3,
        "formation": "voort + durend",
        "meaning_en": "constant, continually",
        "example_nl": "Ze is voortdurend bezig haar Nederlands te verbeteren.",
        "example_en": "She is constantly working on improving her Dutch.",
        "other_b1_words": [
            "bezig",
            "verbeteren"
        ]
    }
];

    const STORAGE_KEY_INDEX = "nl_b1_trainer_index_v1";
    const STORAGE_KEY_ORDER = "nl_b1_trainer_order_v1";

    let order = [];
    let currentIndex = 0;
    let currentPhase = 0;

    function createDefaultOrder() {
        return vocabData.map((_, idx) => idx);
    }

    function shuffleArray(arr) {
        const copy = arr.slice();
        for (let i = copy.length - 1; i > 0; i--) {
            const j = Math.floor(Math.random() * (i + 1));
            [copy[i], copy[j]] = [copy[j], copy[i]];
        }
        return copy;
    }

    function loadState() {
        try {
            const savedOrder = localStorage.getItem(STORAGE_KEY_ORDER);
            const savedIndexStr = localStorage.getItem(STORAGE_KEY_INDEX);
            if (savedOrder) {
                const parsed = JSON.parse(savedOrder);
                if (Array.isArray(parsed) && parsed.length === vocabData.length) {
                    order = parsed;
                }
            }
            if (!order || order.length !== vocabData.length) {
                order = createDefaultOrder();
            }
            if (savedIndexStr !== null) {
                const idx = parseInt(savedIndexStr, 10);
                if (!isNaN(idx) && idx >= 0 && idx < vocabData.length) {
                    currentIndex = idx;
                }
            }
        } catch (e) {
            order = createDefaultOrder();
            currentIndex = 0;
        }
    }

    function saveState() {
        try {
            localStorage.setItem(STORAGE_KEY_ORDER, JSON.stringify(order));
            localStorage.setItem(STORAGE_KEY_INDEX, String(currentIndex));
        } catch (e) {}
    }

    const wordDisplay = document.getElementById("word-display");
    const posDisplay = document.getElementById("pos-display");
    const sentenceDisplay = document.getElementById("sentence-display");
    const translationDisplay = document.getElementById("translation-display");
    const extraInfoDisplay = document.getElementById("extra-info");
    const progressText = document.getElementById("progress-text");
    const difficultyText = document.getElementById("difficulty-text");
    const phaseBadge = document.getElementById("phase-badge");
    const phaseLabel = document.getElementById("phase-label");
    const overviewBody = document.getElementById("overview-body");

    const nextButton = document.getElementById("next-button");
    const replayButton = document.getElementById("replay-button");
    const previousButton = document.getElementById("previous-button");
    const shuffleButton = document.getElementById("shuffle-button");
    const resetButton = document.getElementById("reset-button");

    const phaseNames = [
        { badge: "Fase 1: woord", label: "Lees en spreek het woord hardop uit." },
        { badge: "Fase 2: zin (NL)", label: "Begrijp de Nederlandse zin en zoek de betekenis uit de context." },
        { badge: "Fase 3: vertaling (EN)", label: "Controleer je begrip met de Engelse vertaling." },
        { badge: "Fase 4: extra info", label: "Bekijk betekenis, woordvorming en andere B1-woorden." }
    ];

    function difficultyToStars(level) {
        if (level <= 1) return "‚òÖ‚òÜ‚òÜ (B1 licht)";
        if (level === 2) return "‚òÖ‚òÖ‚òÜ (B1 middel)";
        return "‚òÖ‚òÖ‚òÖ (B1 stevig)";
    }

    function clearDisplays() {
        sentenceDisplay.innerHTML = "";
        translationDisplay.textContent = "";
        extraInfoDisplay.innerHTML = "";
    }

    function highlightSentence(example_nl, mainWord, extras) {
        const tokens = example_nl.split(/(\s+|[.,;:!?])/g);
        const lowerMain = mainWord.toLowerCase();
        const extraSet = new Set((extras || []).map(w => w.toLowerCase()));

        function stripPunct(str) {
            return str.replace(/^[.,;:!?()"'¬´¬ª]+|[.,;:!?()"'¬´¬ª]+$/g, "");
        }

        return tokens.map(t => {
            const core = stripPunct(t);
            const lowerCore = core.toLowerCase();
            if (!core) return t;
            if (lowerCore === lowerMain) {
                return t.replace(core, `<span class="target-word">${core}</span>`);
            }
            if (extraSet.has(lowerCore)) {
                return t.replace(core, `<span class="extra-b1">${core}</span>`);
            }
            return t;
        }).join("");
    }

    function updateOverviewTable() {
        overviewBody.innerHTML = "";
        order.forEach((dataIndex, i) => {
            const item = vocabData[dataIndex];
            const tr = document.createElement("tr");
            tr.classList.add("clickable-row");
            if (i === currentIndex) {
                tr.classList.add("current-row");
            }

            tr.innerHTML = `
                <td>${i + 1}</td>
                <td>${item.word}</td>
                <td>${item.pos}</td>
                <td>${item.meaning_en}</td>
                <td>${"‚òÖ".repeat(item.difficulty)}</td>
            `;

            tr.addEventListener("click", () => {
                currentIndex = i;
                currentPhase = 0;
                saveState();
                render();
            });

            overviewBody.appendChild(tr);
        });
    }

    function render() {
        if (!order.length) return;

        const globalIndex = currentIndex;
        const dataIndex = order[globalIndex];
        const item = vocabData[dataIndex];

        progressText.textContent = `Woord ${globalIndex + 1} / ${vocabData.length}`;
        difficultyText.textContent = difficultyToStars(item.difficulty);

        wordDisplay.textContent = item.word;
        posDisplay.textContent = item.pos ? `Soort woord: ${item.pos}` : "";

        const phaseInfo = phaseNames[currentPhase];
        phaseBadge.textContent = phaseInfo.badge;
        phaseLabel.textContent = phaseInfo.label;

        clearDisplays();

        if (currentPhase >= 1) {
            sentenceDisplay.innerHTML = highlightSentence(item.example_nl, item.word, item.other_b1_words);
        }

        if (currentPhase >= 2) {
            translationDisplay.textContent = item.example_en;
        }

        if (currentPhase >= 3) {
            const ddOther = (item.other_b1_words && item.other_b1_words.length)
                ? item.other_b1_words.join(", ")
                : "‚Äî";

            extraInfoDisplay.innerHTML = `
                <dt>Betekenis (EN)</dt>
                <dd>${item.meaning_en}</dd>
                <dt>Woordvorming</dt>
                <dd>${item.formation}</dd>
                <dt>Moeilijkheid</dt>
                <dd>${difficultyToStars(item.difficulty)}</dd>
                <dt>Andere B1-woorden in de zin</dt>
                <dd>${ddOther}</dd>
            `;
        }

        previousButton.disabled = (currentIndex === 0);
        nextButton.textContent = (currentPhase === 3 && currentIndex === vocabData.length - 1)
            ? "Laatste stap (opnieuw beginnen)"
            : (currentPhase === 3 ? "Volgende woord ‚è≠" : "Volgende stap ‚è≠");

        updateOverviewTable();
    }

    nextButton.addEventListener("click", () => {
        if (currentPhase < 3) {
            currentPhase += 1;
        } else {
            if (currentIndex < vocabData.length - 1) {
                currentIndex += 1;
            } else {
                currentIndex = 0;
            }
            currentPhase = 0;
        }
        saveState();
        render();
    });

    replayButton.addEventListener("click", () => {
        currentPhase = 0;
        render();
    });

    previousButton.addEventListener("click", () => {
        if (currentIndex > 0) {
            currentIndex -= 1;
            currentPhase = 3;
            saveState();
            render();
        }
    });

    shuffleButton.addEventListener("click", () => {
        order = shuffleArray(createDefaultOrder());
        currentIndex = 0;
        currentPhase = 0;
        saveState();
        render();
    });

    resetButton.addEventListener("click", () => {
        if (confirm("Weet je zeker dat je alle voortgang wilt vergeten en opnieuw wilt beginnen?")) {
            try {
                localStorage.removeItem(STORAGE_KEY_INDEX);
                localStorage.removeItem(STORAGE_KEY_ORDER);
            } catch (e) {}
            order = createDefaultOrder();
            currentIndex = 0;
            currentPhase = 0;
            render();
        }
    });

    document.addEventListener("keydown", (e) => {
        if (e.code === "Space" || e.code === "Enter") {
            e.preventDefault();
            nextButton.click();
        }
        if (e.code === "ArrowLeft") {
            previousButton.click();
        }
    });

    loadState();
    render();
</script>
</body>
</html>
